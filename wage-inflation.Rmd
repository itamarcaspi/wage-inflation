---
title: "WPT_ECB_20190530"
output:
  pagedown::html_paged: 
    toc: true
    number_sections: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## The method

I will implement the first basic evaluation methods for the relation between labour costs inflation and price inflation following the first section dispalyed in the ECB's workign paper no.2235. The evaluation will include *cross-correlations and granger causality* tests.

I will use ULC (calculated as the total compensation per sector devided by the real GDP per sector) and use the sector inflation.

## The data
The data starts from Q1 2006 because of previously missing data or a change of measurment method for the compensation and sector GDP (from sna93 to cls11).


```{r}

library(readxl)

df <- read_xlsx("data/wage-inflation-data.xlsx", sheet = "R_data", skip = 1)

```


```{r}
library(tidyverse)
library(lubridate)

df_tidy <- df %>% 
  mutate(DATE = ymd(DATE)) %>% 
  gather("index", "value", -DATE) %>% 
  separate(index,
           into = c("type", "sector"),
           sep = "_",
           extra = "merge")


```



```{r}

df_change <- df_tidy %>% 
  group_by(type, sector) %>% 
  mutate(dlog_value_q = 400*(log(value) - log(lag(value)))) %>% 
  mutate(dlog_value_y = 400*(log(value) - log(lag(value, 4)))) %>% 
  drop_na()


df_change %>% 
  filter(sector != "bs") %>% 
  ggplot(aes(DATE, dlog_value_y, color = type)) +
  geom_line(size = 1) +
  facet_wrap( ~ sector, scales = "free") +
  theme_light()
  

```



